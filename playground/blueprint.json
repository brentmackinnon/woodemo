{
	"$schema": "https://playground.wordpress.net/blueprint-schema.json",
	"preferredVersions": {
		"php": "8.0",
		"wp": "latest"
	},
	"siteOptions": {
		"blogname": "Brent's Woo Demo"
	},
	"plugins": [
		{
			"resource": "url",
			"url": "https://downloads.wordpress.org/plugin/woocommerce.8.5.1.zip"
		}
	],
	"steps": [
		{
			"step": "login",
			"username": "admin",
			"password": "password"
		},
		{
			"step": "installPlugin",
			"pluginZip": "https://downloads.wordpress.org/plugin/woocommerce.8.5.1.zip"
		},
		{
			"step": "activatePlugin",
			"pluginName": "woocommerce"
		},
		{
			"step": "runPHP",
			"code": "<?php\nrequire_once('/wordpress/wp-load.php');\nrequire_once(ABSPATH . 'wp-admin/includes/media.php');\nrequire_once(ABSPATH . 'wp-admin/includes/file.php');\nrequire_once(ABSPATH . 'wp-admin/includes/image.php');\n\n// Add custom CSS to theme\nadd_action('wp_head', function() {\n    echo '<style>\n/* Reset all spacing */\nbody, #page, .site { margin: 0 !important; padding: 0 !important; max-width: 100% !important; }\n.entry-content { margin: 0 !important; padding: 0 !important; }\n.wp-site-blocks { margin: 0 !important; padding: 0 !important; }\n.wp-block-template-part { margin: 0 !important; padding: 0 !important; }\nheader.wp-block-template-part { margin: 0 !important; padding: 0 !important; }\n\n/* Navigation spacing */\n.wp-block-navigation { margin: 0 !important; padding: 0 !important; }\n.wp-block-navigation__container { margin: 0 !important; padding: 0 !important; }\n.wp-block-navigation__responsive-container { padding: 0 !important; }\n.wp-block-navigation__responsive-container-content { gap: 20px !important; }\n\n/* Product grid layout */\n.wc-block-grid { margin: 0 !important; padding: 0 !important; }\n.wc-block-grid__products { gap: 10px !important; padding: 10px !important; margin: 0 !important; }\n.wc-block-grid__product { margin: 0 !important; padding: 0 !important; border: none !important; }\n.wc-block-grid__product-image { margin: 0 !important; padding: 0 !important; }\n.wc-block-grid__product-title { margin: 5px 0 !important; font-size: 0.9rem !important; }\n.wc-block-grid__product-price { margin: 0 !important; font-size: 0.9rem !important; }\n\n/* Product new block specific */\n.wc-block-product-new { margin: 0 !important; padding: 0 !important; max-width: none !important; width: 100vw !important; }\n.wc-block-product-new .wc-block-product-new__products { display: grid !important; grid-template-columns: repeat(3, 1fr) !important; gap: 25px !important; margin: 0 !important; padding: 25px !important; width: 100% !important; box-sizing: border-box !important; }\n.wc-block-product-new .wc-block-product-new__product { margin: 0 !important; padding: 0 !important; width: 100% !important; }\n.wc-block-product-new .wc-block-product-new__product-image { margin: 0 !important; padding: 0 !important; width: 100% !important; position: relative !important; padding-bottom: 100% !important; }\n.wc-block-product-new .wc-block-product-new__product-image img { position: absolute !important; top: 0 !important; left: 0 !important; width: 100% !important; height: 100% !important; object-fit: cover !important; }\n.wc-block-product-new .wc-block-product-new__product-title { font-size: 0.9rem !important; margin: 5px 0 !important; }\n.wc-block-product-new .wc-block-product-new__product-price { font-size: 0.9rem !important; margin: 0 !important; }\n\n/* Section and container spacing */\n.wp-block-group.alignfull { margin: 0 !important; padding: 0 !important; max-width: none !important; }\n.wp-block-cover.alignfull { margin: 0 !important; padding: 0 !important; }\n.wp-block-cover__inner-container { padding: 0 !important; }\n.wp-block-group { padding: 10px !important; margin: 0 !important; }\n.wp-block-heading { margin: 10px 0 !important; }\n\n/* Additional resets */\n.alignfull { margin: 0 !important; padding: 0 !important; max-width: none !important; }\n.wp-block-spacer { display: none !important; }\n</style>';\n});\n\n// Define base URL for images\n$base_url = 'https://raw.githubusercontent.com/brentmackinnon/woodemo/main/playground/images';\n\n// Define categories with their images\n$categories = array(\n    'New and Featured' => $base_url . '/categories/minimalist-shoes.jpg',\n    'Men' => $base_url . '/categories/minimalist-mens.jpg',\n    'Women' => $base_url . '/categories/minimalist-womens.jpg',\n    'Kids' => $base_url . '/categories/minimalist-kids.jpg'\n);\n\n// Create categories\nforeach ($categories as $cat_name => $image_url) {\n    $cat_id = wp_insert_term($cat_name, 'product_cat');\n    if (!is_wp_error($cat_id)) {\n        $attach_id = handle_image_upload($image_url, 0);\n        if ($attach_id) {\n            update_term_meta($cat_id['term_id'], 'thumbnail_id', $attach_id);\n        }\n    }\n}\n\n// Define products\n$products = array(\n    array(\n        'title' => 'Street Style Pro',\n        'price' => '189.99',\n        'category' => array('Men', 'New and Featured'),\n        'image' => $base_url . '/products/minimalist-street.jpg',\n        'content' => 'Premium running shoes with advanced air cushioning technology. Features a lightweight, breathable mesh upper and responsive sole for maximum performance.'\n    ),\n    array(\n        'title' => 'Training Max',\n        'price' => '159.99',\n        'category' => array('Women'),\n        'image' => $base_url . '/products/minimalist-training.jpg',\n        'content' => 'Engineered for speed and comfort. The Training Max combines lightweight materials with responsive cushioning for an optimal running experience.'\n    ),\n    array(\n        'title' => 'Performance Runner',\n        'price' => '129.99',\n        'category' => array('Kids'),\n        'image' => $base_url . '/products/minimalist-performance.jpg',\n        'content' => 'Versatile and durable shoes perfect for active kids. Features a flexible sole and breathable upper for all-day comfort.'\n    )\n);\n\n// Function to handle image upload\nfunction handle_image_upload($image_url, $post_id) {\n    $upload_dir = wp_upload_dir();\n    $image_data = file_get_contents($image_url);\n    \n    if ($image_data === false) {\n        error_log('Failed to download image from: ' . $image_url);\n        return false;\n    }\n    \n    $filename = basename($image_url);\n    $unique_filename = wp_unique_filename($upload_dir['path'], $filename);\n    $filepath = $upload_dir['path'] . '/' . $unique_filename;\n    \n    if (file_put_contents($filepath, $image_data) === false) {\n        error_log('Failed to write image to: ' . $filepath);\n        return false;\n    }\n    \n    $wp_filetype = wp_check_filetype($filename, null);\n    if (!$wp_filetype['type']) {\n        error_log('Invalid file type for: ' . $filename);\n        return false;\n    }\n    \n    $attachment = array(\n        'post_mime_type' => $wp_filetype['type'],\n        'post_title' => sanitize_file_name($filename),\n        'post_content' => '',\n        'post_status' => 'inherit'\n    );\n    \n    $attach_id = wp_insert_attachment($attachment, $filepath, $post_id);\n    if (is_wp_error($attach_id)) {\n        error_log('Failed to insert attachment: ' . $attach_id->get_error_message());\n        return false;\n    }\n    \n    require_once(ABSPATH . 'wp-admin/includes/image.php');\n    $attach_data = wp_generate_attachment_metadata($attach_id, $filepath);\n    if (is_wp_error($attach_data)) {\n        error_log('Failed to generate attachment metadata: ' . $attach_data->get_error_message());\n        return false;\n    }\n    \n    wp_update_attachment_metadata($attach_id, $attach_data);\n    return $attach_id;\n}\n\n// Create products\nforeach ($products as $product) {\n    $product_id = wp_insert_post(array(\n        'post_title' => $product['title'],\n        'post_content' => $product['content'],\n        'post_status' => 'publish',\n        'post_type' => 'product'\n    ));\n\n    if (!is_wp_error($product_id)) {\n        // Handle image upload\n        $attach_id = handle_image_upload($product['image'], $product_id);\n        if ($attach_id) {\n            set_post_thumbnail($product_id, $attach_id);\n        }\n\n        // Set product meta\n        update_post_meta($product_id, '_price', $product['price']);\n        update_post_meta($product_id, '_regular_price', $product['price']);\n        update_post_meta($product_id, '_visibility', 'visible');\n        update_post_meta($product_id, '_stock_status', 'instock');\n        update_post_meta($product_id, '_virtual', 'no');\n        wp_set_object_terms($product_id, $product['category'], 'product_cat');\n    }\n}\n\n// Create homepage\n$page_id = wp_insert_post(array(\n    'post_title' => '',\n    'post_content' => '<!-- wp:group {\"align\":\"full\",\"style\":{\"spacing\":{\"margin\":{\"top\":\"0\",\"bottom\":\"0\"},\"padding\":{\"top\":\"0\",\"right\":\"0\",\"bottom\":\"0\",\"left\":\"0\"}}}} -->\n<div class=\"wp-block-group alignfull\" style=\"margin-top:0;margin-bottom:0;padding:0\">\n    <!-- wp:cover {\"url\":\"' . $base_url . '/banners/minimalist-hero.jpg\",\"dimRatio\":50,\"minHeight\":700,\"isDark\":true,\"align\":\"full\",\"style\":{\"spacing\":{\"margin\":{\"top\":\"0\",\"bottom\":\"0\"},\"padding\":{\"top\":\"0\",\"right\":\"0\",\"bottom\":\"0\",\"left\":\"0\"}}}} -->\n    <div class=\"wp-block-cover alignfull is-dark\" style=\"margin:0;padding:0;min-height:700px\">\n        <span aria-hidden=\"true\" class=\"wp-block-cover__background has-background-dim\"></span>\n        <img class=\"wp-block-cover__image-background\" alt=\"\" src=\"' . $base_url . '/banners/minimalist-hero.jpg\" data-object-fit=\"cover\"/>\n        <div class=\"wp-block-cover__inner-container\">\n            <!-- wp:heading {\"textAlign\":\"center\",\"level\":1,\"style\":{\"typography\":{\"fontSize\":\"4rem\"},\"spacing\":{\"margin\":{\"top\":\"0\",\"bottom\":\"1rem\"}}}} -->\n            <h1 class=\"has-text-align-center\" style=\"font-size:4rem;margin-top:0;margin-bottom:1rem\">Just Woo It</h1>\n            <!-- /wp:heading -->\n            <!-- wp:paragraph {\"align\":\"center\",\"style\":{\"typography\":{\"fontSize\":\"1.5rem\"},\"spacing\":{\"margin\":{\"bottom\":\"2rem\"}}}} -->\n            <p class=\"has-text-align-center\" style=\"font-size:1.5rem;margin-bottom:2rem\">New Arrivals for Your Best Performance</p>\n            <!-- /wp:paragraph -->\n            <!-- wp:buttons {\"layout\":{\"type\":\"flex\",\"justifyContent\":\"center\"},\"style\":{\"spacing\":{\"margin\":{\"top\":\"1rem\",\"bottom\":\"1rem\"}}}} -->\n            <div class=\"wp-block-buttons\" style=\"margin-top:1rem;margin-bottom:1rem\">\n                <!-- wp:button {\"backgroundColor\":\"vivid-cyan-blue\",\"style\":{\"spacing\":{\"padding\":{\"top\":\"1rem\",\"bottom\":\"1rem\",\"left\":\"2rem\",\"right\":\"2rem\"}}}} -->\n                <div class=\"wp-block-button\">\n                    <a class=\"wp-block-button__link has-vivid-cyan-blue-background-color has-background wp-element-button\" style=\"padding:1rem 2rem\">Shop Now</a>\n                </div>\n                <!-- /wp:button -->\n            </div>\n            <!-- /wp:buttons -->\n        </div>\n    </div>\n    <!-- /wp:cover -->\n</div>\n<!-- /wp:group -->\n\n<!-- wp:group {\"align\":\"full\",\"style\":{\"spacing\":{\"padding\":{\"top\":\"50px\",\"bottom\":\"0\",\"left\":\"0\",\"right\":\"0\"},\"margin\":{\"top\":\"0\",\"bottom\":\"0\"}}}} -->\n<div class=\"wp-block-group alignfull\" style=\"margin-top:0;margin-bottom:0;padding-top:50px\">\n    <!-- wp:query {\"queryId\":1,\"query\":{\"perPage\":3,\"postType\":\"product\",\"order\":\"desc\",\"orderBy\":\"date\"},\"displayLayout\":{\"type\":\"flex\",\"columns\":3},\"align\":\"full\",\"style\":{\"spacing\":{\"blockGap\":\"25px\",\"padding\":{\"top\":\"0\",\"bottom\":\"0\",\"left\":\"25px\",\"right\":\"25px\"}}}} -->\n    <div class=\"wp-block-query alignfull\" style=\"padding:0 25px\">\n        <!-- wp:post-template {\"style\":{\"spacing\":{\"blockGap\":\"25px\"}}} -->\n            <!-- wp:woocommerce/product-link {\"style\":{\"spacing\":{\"margin\":{\"bottom\":\"10px\"}}}} -->\n            <div class=\"wp-block-woocommerce-product-link\" style=\"margin-bottom:10px\">\n                <!-- wp:post-featured-image {\"aspectRatio\":\"1\",\"width\":\"100%\",\"height\":\"100%\",\"scale\":\"cover\",\"style\":{\"spacing\":{\"margin\":{\"bottom\":\"10px\"}}}} /-->\n                <!-- wp:post-title {\"level\":3,\"fontSize\":\"small\",\"style\":{\"spacing\":{\"margin\":{\"top\":\"0\",\"bottom\":\"5px\"}}}} /-->\n                <!-- wp:woocommerce/product-price {\"fontSize\":\"small\",\"style\":{\"spacing\":{\"margin\":{\"top\":\"0\",\"bottom\":\"0\"}}}} /-->\n            </div>\n            <!-- /wp:woocommerce/product-link -->\n        <!-- /wp:post-template -->\n    </div>\n    <!-- /wp:query -->\n</div>\n<!-- /wp:group -->\n\n<!-- wp:spacer {\"height\":\"60px\"} -->\n<div style=\"height:60px\" aria-hidden=\"true\" class=\"wp-block-spacer\"></div>\n<!-- /wp:spacer -->\n\n<!-- wp:cover {\"url\":\"' . $base_url . '/banners/minimalist-community.jpg\",\"dimRatio\":50,\"minHeight\":400,\"align\":\"full\",\"style\":{\"spacing\":{\"padding\":{\"top\":\"3rem\",\"bottom\":\"3rem\",\"left\":\"2rem\",\"right\":\"2rem\"}}}} -->\n<div class=\"wp-block-cover alignfull\" style=\"min-height:400px;padding:3rem 2rem\">\n    <span aria-hidden=\"true\" class=\"wp-block-cover__background has-background-dim\"></span>\n    <img class=\"wp-block-cover__image-background\" alt=\"\" src=\"' . $base_url . '/banners/minimalist-community.jpg\" data-object-fit=\"cover\"/>\n    <div class=\"wp-block-cover__inner-container\">\n        <!-- wp:heading {\"textAlign\":\"center\",\"level\":2,\"style\":{\"typography\":{\"fontSize\":\"2.5rem\"},\"spacing\":{\"margin\":{\"bottom\":\"1rem\"}}}} -->\n        <h2 class=\"has-text-align-center\" style=\"font-size:2.5rem;margin-bottom:1rem\">Join Our Community</h2>\n        <!-- /wp:heading -->\n        <!-- wp:paragraph {\"align\":\"center\",\"style\":{\"spacing\":{\"margin\":{\"bottom\":\"2rem\"}}}} -->\n        <p class=\"has-text-align-center\" style=\"margin-bottom:2rem\">Sign up for exclusive offers, latest styles, and performance tips.</p>\n        <!-- /wp:paragraph -->\n        <!-- wp:buttons {\"layout\":{\"type\":\"flex\",\"justifyContent\":\"center\"},\"style\":{\"spacing\":{\"margin\":{\"top\":\"1rem\"}}}} -->\n        <div class=\"wp-block-buttons\" style=\"margin-top:1rem\">\n            <!-- wp:button {\"backgroundColor\":\"white\",\"textColor\":\"black\",\"style\":{\"spacing\":{\"padding\":{\"top\":\"1rem\",\"bottom\":\"1rem\",\"left\":\"2rem\",\"right\":\"2rem\"}}}} -->\n            <div class=\"wp-block-button\">\n                <a class=\"wp-block-button__link has-black-color has-white-background-color has-text-color has-background wp-element-button\" style=\"padding-top:1rem;padding-right:2rem;padding-bottom:1rem;padding-left:2rem\">Sign Up Now</a>\n            </div>\n            <!-- /wp:button -->\n        </div>\n        <!-- /wp:buttons -->\n    </div>\n</div>\n<!-- /wp:cover -->',\n    'post_status' => 'publish',\n    'post_type' => 'page'\n));\n\n// Setup navigation menu\n$menu_name = 'Primary Menu';\n$menu_exists = wp_get_nav_menu_object($menu_name);\n\nif (!$menu_exists) {\n    $menu_id = wp_create_nav_menu($menu_name);\n    \n    foreach ($categories as $cat_name => $image_url) {\n        $cat = get_term_by('name', $cat_name, 'product_cat');\n        if ($cat) {\n            wp_update_nav_menu_item($menu_id, 0, array(\n                'menu-item-title' => $cat_name,\n                'menu-item-object' => 'product_cat',\n                'menu-item-object-id' => $cat->term_id,\n                'menu-item-type' => 'taxonomy',\n                'menu-item-status' => 'publish'\n            ));\n        }\n    }\n    \n    $locations = get_theme_mod('nav_menu_locations');\n    $locations['primary'] = $menu_id;\n    set_theme_mod('nav_menu_locations', $locations);\n}\n\n// Configure WordPress settings\nupdate_option('show_on_front', 'page');\nupdate_option('page_on_front', $page_id);\nupdate_option('woocommerce_store_setup_complete', 'yes');\nupdate_option('woocommerce_default_country', 'US:CA');\nupdate_option('woocommerce_currency', 'USD');\nupdate_option('woocommerce_currency_pos', 'left');\n\n// Clean up default pages\n$default_pages = get_pages(array('post_type' => 'page', 'post_status' => 'publish'));\nforeach ($default_pages as $page) {\n    if ($page->ID != $page_id && $page->post_title != 'Cart' && $page->post_title != 'Checkout') {\n        wp_delete_post($page->ID, true);\n    }\n}"
		}
	],
	"features": {
		"networking": true
	},
	"login": true,
	"landingPage": "/"
}